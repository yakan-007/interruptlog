# InterruptLog 使いこなしガイド

## 1. 目的別利用シナリオ

### 1-1. 対話ログ型（割り込み管理を重視）
- **想定ユーザー**: 受付・サポートライン・ヘルプデスクなど、誰から何の問い合わせを受けたかを素早く記録したい人  
- **推奨設定**
  - 割り込みカテゴリ名をよく使う分類に変更（例: 電話 / チャット / エスカレーション）。  
  - 割り込みディレクトリ（連絡先・件名）を使って、よく登場する名前やタイトルをボタン化。  
  - オートスタートを無効化し、割り込み開始→停止の操作に集中。  
- **基本操作フロー**
  1. 割り込みを受けたら `割り込み開始` ボタン＋モーダルで発信者・件名を即入力。  
  2. 応対が終わったら `割り込み停止` → 元タスクへ復帰（ボタンひとつで前タスクへ戻る）。  
  3. イベント履歴で必要なラベル・カテゴリを編集。  
  4. アーカイブには自動保管されるので、週次で CSV 出力 → レポート作成。  
- **活用ポイント**
  - `イベント履歴` のフィルター（本日 / 1週間など）を切り替えて、最近の割り込みをレビュー。  
  - `過去イベントの追加` モーダルで、抜け漏れたログを後から追記。  
  - アーカイブ一覧からヒアリング内容を検索して、経緯を追跡。  

### 1-2. タイムボクシング型（集中と休憩のリズム管理）
- **想定ユーザー**: ポモドーロや Time Blocking を実践している開発者・ライター・受験生。  
- **推奨設定**
  - タスク追加時に「詳細を追加」を常に開き、予定時間・期限を入力。  
  - オートスタートを有効化し、タスク登録と同時にタイマーを開始。  
  - 休憩タイプ（ショート / コーヒー / ランチ）を使ってリズムを維持。  
- **基本操作フロー**
  1. その日のタスクをまとめて登録（予定時間と期限も入力）。  
  2. タスク開始ボタン → 集中 → 必要なら割り込み・休憩を挟む。  
  3. セッション終了後はタスクを完了し、アーカイブで実績を確認。  
  4. 日次で CSV をエクスポートして、予定 vs 実績の差異をチェック。  
- **活用ポイント**
  - `TaskPlanningDialog` を使って、計画時間をリセット／再設定。  
  - `イベント履歴` モーダルで終了時間を修正し、ギャップイベントを挿入。  
  - アーカイブから復元して、再度着手するロングランタスクを管理。  

### 1-3. 計画 vs 実績トラッカー型（プロジェクト管理志向）
- **想定ユーザー**: 開発チーム・フリーランス・コンサルなど、計画・見積もりの精度を追う人。  
- **推奨設定**
  - タスク並びを「期日順」に切り替える（設定 → タスクを期限で並び替え）。  
  - 割り込みカテゴリは最小限にし、タスクの再割り当て・カテゴリ変更を中心に運用。  
  - アーカイブ閲覧を月次で行い、CSV を BI ツールやスプレッドシートに読み込む。  
- **基本操作フロー**
  1. タスク作成時にカテゴリ・計画時間・期日を必ず入力。  
  2. 作業開始・中断・再開は、イベント履歴から丁寧に編集。  
  3. 完了タスクは自動でアーカイブに入るので、レポート作成時のみ一覧を確認。  
- **活用ポイント**
  - `TaskLedger` には作成時カテゴリや最新カテゴリなどが追跡されるため、CSV を活用すると変遷がわかる。  
  - アーカイブから部分復元し、次フェーズに引き継ぐことで過去のメモや計画を再利用可能。  

---

## 2. 主要コンポーネントと操作リファレンス

### 2-1. マイタスク（TaskManagementSection）
| 操作 | 説明 | 補足 |
|------|------|------|
| タスク追加 | タイトル＋（任意のカテゴリ）→ `タスクを追加` | オートスタート有効時は `追加して開始` に表示切替 |
| 詳細入力 | `詳細を追加` で予定時間・期限を入力 | 計画無効時は自動的に閉じる |
| 並べ替え | ドラッグ＆ドロップで順序変更 | 期限ソート中は操作不可、メッセージ表示 |
| 計画編集 | ペンアイコンから `TaskPlanningDialog` | 計画スナップショットはイベントにも反映 |
| 完了 | チェックボックスで ON/OFF | 実行中タスクは確認ダイアログ→停止→完了 |
| 削除 | ゴミ箱ボタン | 確認ダイアログあり |

### 2-2. アーカイブ機能
- **自動アーカイブ**: タスクを完了すると、アーカイブに自動移動。アーカイブ内に保存されたタスクは `archivedAt` を持ち、元の完了日時・計画情報も維持。  
- **メイン画面のプレビュー**: 最近 5 件までを折りたたみリストで表示。復元・削除が即座に可能。  
- **ダイアログ (`ArchivedTasksDialog`)**:
  - 検索（タスク名フィルタ）  
  - 復元 → マイタスクに戻し、完了フラグは解除  
  - 削除 → アーカイブから完全削除  
  - CSV エクスポート → `archived_tasks_YYYY-MM-DD.csv` としてダウンロード  

### 2-3. イベント履歴
- フィルタ: 「本日のみ / 本日+昨日 / 過去1週間 / すべて」  
- 編集モード: ラベル・カテゴリ・割り込み情報・タスク紐付けなどを直接編集。  
- 時間編集モーダル: 終了時刻の修正・ギャップイベントの挿入・タイプ変更・詳細入力に対応。  
- 過去イベント追加: 押し忘れを手動で追加し、重複検出・整合性チェックを自動で行う。  

### 2-4. 割り込みディレクトリ
- `割り込み開始` や `割り込み詳細編集` で使う連絡先／件名のサジェスト。  
- カテゴリ・件名・連絡先は `categoryActions` のヘルパーで重複なく管理され、ボタンタップで即入力。  

---

## 3. 推奨設定とヒント

### 3-1. タスク計画を活かすポイント
- 表示順を `期限順` に切り替えると、予定時間が入っているタスクも上部に浮かびます。  
- 実行中イベントのメタデータに計画スナップショットが保存されるため、後からイベント履歴で「予定 vs 実績」を比較可能。  

### 3-2. 割り込み運用のベストプラクティス
- イベント開始時に発信者（who）を入力すると、ディレクトリに自動登録され次回以降はボタンで入力できます。  
- 緊急度は `Low / Medium / High` の 3 段階。緊急対応が多い場合は CSV に緊急度を含めてエクスポートし、可視化すると傾向が掴みやすくなります。  

### 3-3. アーカイブの管理
- アーカイブ済みタスクはメインリストには表示されません。復元時には完了フラグが外れます。  
- 完了タスクが多い場合は、月次で CSV を吐き出して保存 → アーカイブから削除する運用にするとリストが軽く保てます。  

### 3-4. CSV 出力の活用法
- **タイムボクシング型**: 日次 CSV を Notion / Google Sheets に貼り付け、予定時間とのズレを可視化。  
- **対話ログ型**: 発信者別に集計し、曜日・時間帯ごとの問い合わせ件数を算出。  
- **プロジェクト管理型**: 計画時間と実績を pivot 集計し、見積もりの改善に活用。  

---

## 4. 追加の注意点

- オートスタート ON の状態で、タスク追加→手動で停止する前に別タスクへ切り替えると、イベントが短時間で分割されるため、まとめて管理したい場合はオートスタートを OFF にするか、イベント履歴で時間を調整してください。  
- アーカイブから削除したタスクは復元できません。計画データやメモが必要な場合は、必ず CSV などでバックアップを取ってから削除してください。  
- データベースは IndexedDB を利用しています。ブラウザのストレージをクリアするとすべてのデータが消えるので、重要な記録は定期的にエクスポートしておくのが安全です。  

---

## 5. 次のステップ

- 各シナリオに合わせた設定プリセットを今後追加予定です。  
- リマインダーや通知を使いたい場合は、ブラウザの通知許可設定を確認し、今後予定している Due アラートの強化をお待ちください。  
- 改善の要望や運用例があればフィードバックをいただけると、プリセット設計・ドキュメント整備の優先度付けに役立ちます。  

InterruptLog をぜひ自分のワークフローに合わせてアレンジしてみてください！
